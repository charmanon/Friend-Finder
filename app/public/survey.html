<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Find Hot Friends!</title>
  <link rel="icon" type="image/png" href="images/favicon.ico">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <!-- CSS -->
  <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <!-- <link rel="stylesheet" href="css/style.css"> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>

<style>

body{
  display: flex;
}

.jumbotron{
  background-image: url("images/friends.jpg");
  background-repeat: no-repeat;
  background-size: cover;
  height:100%;
  min-height:500px;
}

.title{
  padding-top: 50px;
  color:white !important;
  text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
}

.form-group{
  max-width: 800px;
}

.panel{
  min-width: 600px;
  max-width: 800px;
}

.survey{
  display: flex;
  align-content: center;
}

.btn-lg{
  max-width: 400px;
}

#photo-friend{
  width: 300px;
}

.container{
  margin: auto;
  text-align: center;
}

.survey{
  display: flex;
}

.questions{
  margin: auto;
}

#close{
  max-width: 200px;
}

</style>
  
  <!--Header -->
  <div class="container">
    <div class="bg"></div>
    <div class="jumbotron">
      <h1 class="text-center title font-family-serif"><span class="glyphicon glyphicon-fire"></span>Find Hot Friends</h1>
      <hr>
    </div>

    <!--Survery questions-->
    <div class = "survey">
      <div class = "questions">
        <div class="panel panel-info">
          <div class="panel-heading"><h3>Name:</h3></div>
          <input type="text" class="form-control" id="name" required>
          </div>

          <div class="panel panel-info">
          <div class="panel-heading"><h3>Photo:</h3></div>
          <input type="text" class="form-control" id="photo" required>
          </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How big are your forearms?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques1">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How big are your teeth?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques2">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How big are your lips?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques3">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How big are your feet?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques4">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How many pairs of shoes do you wear?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques5">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How many dogs do you own?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques6">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How many tacos did you have last time you had tacos?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques7">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How many times did you say "I love you" to your pet rock?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <label for="sel1">Select list (select one):</label>
              <select class="form-control" id="ques8">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>Which Rocky movie is your favorite?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques9">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading"><h4>How are your forearms?</h4></div>
          <div class="panel-body">
            <div class="form-group">
              <select class="form-control" id="ques10">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              <br>
            </div>
          </div>
        </div>
      </div>
    </div>


<!--Modal that pops up when the submit button is pressed-->
   <div class="container">
    <!-- Trigger the modal with a button -->
    <button type="button" id="submit" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">Find your new BFF!</button>

    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
      
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h2 class="modal-title">This is your new best friend!</h2>
          </div>
          <div class="modal-body">
            <h3>Lucky you!</h3>
            <h2 id="name-friend"></h2>
            <img id="photo-friend">
          </div>
          <div class="modal-footer">
            <button type="button" id="close" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
        
      </div>
    </div>
    
  </div>

    <footer class="footer">
      <div class="container">
        <p><a href="/friends">API Friends List</a> | <a href="https://github.com/sharloteean/Friend-Finder">GitHub Repo</a> | <a href="/bestfriend">Your best friend</a></p>
      </div>
    </footer>

  </div>
<script type="text/javascript">

    // When button is clicked, data from the text fields is saved into a new character object
    $("#submit").on("click", function(event) {
      event.preventDefault();
      var name = $("#name").val().trim();
      var photo = $("#photo").val().trim();
      var scores = [];

      if (name === ""){
        event.stopPropagation();
        alert("Please add your name.");
      }

      else if (photo === ""){
        event.stopPropagation();
        alert("Please add your photo link.")
      }

      else if (name != "" && photo != ""){
        $('select','.questions').each(function() {
          scores.push($(this).val()); 
        });
        var newCharacter = {
          name: name,
          photo: photo,
          scores: scores
        };

        // Pushes new character to the friends array
        $.post("/friends", newCharacter)
        .done(function(data) {
          console.log(data);
          alert("Adding character...");
        });
        console.log(newCharacter);

        //Gets the new best friend object from the server
        $.get("/bestfriend", function(data) {
          if (data) {
            $("#stats").show();
            $("#name-friend").text(data.name);
            $("#photo-friend").attr("src",data.photo);
          }
        });
      }
    });




  </script>


</body>
</html>
